import unittest
import numpy as np

from corner_correlation_score import cornerCorrelationScore
class TestRefineCorner(unittest.TestCase):
    def test_xx(self):
        v1 = [0.66620458, 0.74576904]
        v2 = [-0.65996473, 0.75129658]
        img_weight = np.array([[0.37706246, 0.34478597, 0.40876593, 0.3772867, 0.27464983,
                                0.12004101, 0.05614831, 0.15513757, 0.22950393],
                               [0.38601066, 0.40071063, 0.40363592, 0.28371133, 0.13590372,
                                0.02111829, 0.04960435, 0.13269745, 0.35426768],
                               [0.20961142, 0.20765808, 0.15827794, 0.07998462, 0.04241825,
                                0.01240109, 0.08309654, 0.28934693, 0.69024065],
                               [0.06573747, 0.04384447, 0.01999615, 0.06769677, 0.09613843,
                                0.13316021, 0.34052227, 0.71561913, 1.12616639],
                               [0.05261337, 0.05022058, 0.0533391, 0.03862297, 0.07734543,
                                0.29477052, 0.68587104, 1.11478826, 1.33941524],
                               [0.0533391, 0.05545935, 0.05829831, 0.07543287, 0.13909136,
                                0.49162147, 1.02484331, 1.26080113, 1.10187707],
                               [0.04037503, 0.04223659, 0.03529412, 0.08272558, 0.19215687,
                                0.61449868, 1.12341824, 1.07523238, 0.69995331],
                               [0.03615508, 0.05261337, 0.05973156, 0.07764309, 0.18293183,
                                0.67236322, 1.19661838, 1.09254231, 0.6779892],
                               [0.03882155, 0.05333911, 0.06200545, 0.04991342, 0.13356382,
                                0.53975375, 1.09311224, 1.27190689, 1.05833687]])

        np.testing.assert_allclose([1.0, np.pi, np.nan],
                                   [1, np.sqrt(np.pi) ** 2, np.nan])
